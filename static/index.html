<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>CarminTrack Telemetry</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="/static/index.css" />
</head>
<body>
  <div id="map"></div>
  <div id="lap-controls">
    <h2>Laps</h2>
    <div id="lap-buttons"></div>
  </div>
  <div id="speed-legend">
    <h2>Speed Legend</h2>
    <div id="speed-legend-rows"></div>
    <div class="speed-toggle">
      <input type="checkbox" id="speed-coloring-toggle" checked />
      <label for="speed-coloring-toggle">Show Speed Colormap</label>
    </div>
  </div>
  <div id="side-panel">
    <div id="panel-toggle">
      <button data-panel="delta-panel" class="active">Lap Delta</button>
      <button data-panel="corner-panel">Corners</button>
      <button data-panel="heatmap-panel">Heatmaps</button>
      <button data-panel="export-panel">Export</button>
    </div>
    <div id="panel-views">
      <div id="delta-panel" class="panel-view active">
        <h2>Lap Delta</h2>
        <select id="delta-select"></select>
        <div id="delta-readout">Δ 0.00 s</div>
        <small id="delta-reference"></small>
      </div>
      <div id="corner-panel" class="panel-view">
        <h2>Corners</h2>
        <div id="corner-list"></div>
      </div>
      <div id="heatmap-panel" class="panel-view">
        <h2>Heatmaps</h2>
        <label class="heatmap-option">
          <input type="checkbox" data-layer="brake" />
          Braking intensity
        </label>
        <label class="heatmap-option">
          <input type="checkbox" data-layer="throttle" />
          Throttle zones
        </label>
        <label class="heatmap-option">
          <input type="checkbox" data-layer="lateral" />
          Lateral load
        </label>
      </div>
      <div id="export-panel" class="panel-view">
        <h2>Export</h2>
        <select id="export-lap-select"></select>
        <button id="export-lap-btn">Download Lap CSV</button>
        <button id="export-session-btn">Download Session JSON</button>
      </div>
    </div>
  </div>
  <div id="hud">
    <h1>Telemetry Cursor</h1>
    <small>Hover the trajectory to probe GNSS + IMU samples</small>
    <div class="telemetry-grid">
      <div class="telemetry-item">
        <span class="label">Time (s)</span>
        <span class="value" id="telemetry-time">--</span>
      </div>
      <div class="telemetry-item">
        <span class="label">Speed (mph)</span>
        <span class="value" id="telemetry-speed">--</span>
      </div>
      <div class="telemetry-item">
        <span class="label">Long accel (m/s²)</span>
        <span class="value" id="telemetry-long">--</span>
      </div>
      <div class="telemetry-item">
        <span class="label">Lat accel (m/s²)</span>
        <span class="value" id="telemetry-lat">--</span>
      </div>
      <div class="telemetry-item">
        <span class="label">IMU | ax / ay / az</span>
        <span class="value" id="telemetry-imu">--</span>
      </div>
      <div class="telemetry-item">
        <span class="label">Distance (mi)</span>
        <span class="value" id="telemetry-distance">--</span>
      </div>
    </div>
    <div id="status">Loading session…</div>
    <div id="lap-list"></div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="/static/index.js"></script>
</body>
</html>
